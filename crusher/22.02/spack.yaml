spack:
  view: false
  concretization: separately

  config:
    concretizer: clingo

  compilers:
  - compiler:
      spec: gcc@11.2.0
      paths:
        cc: /opt/cray/pe/craype/2.7.13/bin/cc
        cxx: /opt/cray/pe/craype/2.7.13/bin/CC
        f77: /opt/cray/pe/craype/2.7.13/bin/ftn
        fc: /opt/cray/pe/craype/2.7.13/bin/ftn
      flags: {}
      operating_system: sles15
      target: any
      modules:
      - PrgEnv-gnu
      - gcc/11.2.0
      - craype-x86-trento
      - libfabric
      environment: {}
      extra_rpaths: []

  packages:
    all:
      compiler:
      - clang@14.0.0-rocm5.1.0
      providers:
        blas:
        - openblas
        - cray-libsci
        lapack:
        - openblas
        - cray-libsci
        mpi:
        - cray-mpich
        scalapack:
        - netlib-scalapack
      target:
      - zen3
      variants: +mpi

  include:
  - ./rocm-packages.yaml

  specs:
  - amrex@22.02 +rocm amdgpu_target=gfx90a